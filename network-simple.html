<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë„¤íŠ¸ì›Œí¬ ì‹œê°í™” - ê°„ë‹¨ ë²„ì „</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #network { width: 100%; height: 600px; border: 1px solid #ccc; }
        .controls { margin: 20px 0; }
        button { margin: 5px; padding: 10px; }
    </style>
</head>
<body>
    <h1>ğŸŒ ë„¤íŠ¸ì›Œí¬ ì‹œê°í™” í…ŒìŠ¤íŠ¸</h1>
    
    <div class="controls">
        <button onclick="loadNetwork()">ë„¤íŠ¸ì›Œí¬ ë¡œë“œ</button>
        <button onclick="clearNetwork()">ì´ˆê¸°í™”</button>
    </div>
    
    <div id="network"></div>
    
    <div id="info"></div>
    
    <script>
        const API_BASE = `http://${window.location.hostname}:8081/api`;
        let network = null;
        
        async function loadNetwork() {
            try {
                document.getElementById('info').innerHTML = 'ë¡œë”© ì¤‘...';
                
                const response = await fetch(`${API_BASE}/network-visualization`);
                const result = await response.json();
                
                console.log('API Response:', result);
                
                if (result.data && result.data.nodes && result.data.edges) {
                    const container = document.getElementById('network');
                    const data = {
                        nodes: new vis.DataSet(result.data.nodes),
                        edges: new vis.DataSet(result.data.edges)
                    };
                    
                    const options = {
                        nodes: {
                            shape: 'box',
                            margin: 10,
                            font: { size: 14 }
                        },
                        edges: {
                            arrows: 'to',
                            font: { size: 12 }
                        },
                        physics: {
                            enabled: true
                        }
                    };
                    
                    network = new vis.Network(container, data, options);
                    
                    document.getElementById('info').innerHTML = `
                        <p>âœ… ë„¤íŠ¸ì›Œí¬ ë¡œë“œ ì™„ë£Œ!</p>
                        <p>ë…¸ë“œ: ${result.data.nodes.length}ê°œ</p>
                        <p>ì—£ì§€: ${result.data.edges.length}ê°œ</p>
                    `;
                } else {
                    throw new Error('Invalid data format');
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('info').innerHTML = `âŒ ì˜¤ë¥˜: ${error.message}`;
            }
        }
        
        function clearNetwork() {
            if (network) {
                network.destroy();
                network = null;
            }
            document.getElementById('info').innerHTML = 'ë„¤íŠ¸ì›Œí¬ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.';
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.onload = () => {
            console.log('API Base:', API_BASE);
            loadNetwork();
        };
    </script>
</body>
</html>
